#!/bin/bash

#for dubugging in 'gdb'

cd src

gfortran -c -g3 -O3 -fopenmp params.f90

cp parallel.f90 parallel.f90.bkp
rm parallel.f90
cp serial.f90 parallel.f90

gfortran -c -g3 -O3 -fopenmp parallel.f90
rm parallel.f90
cp parallel.f90.bkp parallel.f90

gfortran -c -g3 -O3 -fopenmp data.f90

gfortran -c -g3 -O3 -fopenmp user.f90

gfortran -c -g3 -O3 -fopenmp chain.f90
gfortran -c -g3 -O3 -fopenmp solver.f90

gfortran -c -g3 -O3 -fopenmp analysis.f90
gfortran -c -g3 -O3 -fopenmp markov.f90

gfortran -c -g3 -O3 -fopenmp main.f90

gfortran -o main.noMPI.gnu.exe -O3 -g3 -fopenmp params.o parallel.o data.o user.o chain.o solver.o analysis.o markov.o main.o

cp main.noMPI.gnu.exe ../
rm *.o
rm *.mod
rm *.exe
cd ..